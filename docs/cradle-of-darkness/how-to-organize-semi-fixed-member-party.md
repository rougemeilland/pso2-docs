# 半固定ゆりかごTを実現する方法の例

[ [トップページへ](../README.md) ]

## 0. 目次

- [1. 概要](#1-%E6%A6%82%E8%A6%81)
- [2. 本ドキュメントが対象とする読者](#2-%E6%9C%AC%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%8C%E5%AF%BE%E8%B1%A1%E3%81%A8%E3%81%99%E3%82%8B%E8%AA%AD%E8%80%85)
- [3. 固定トリガーと参加パスワードの仕様 (おさらい)](#3-%E5%9B%BA%E5%AE%9A%E3%83%88%E3%83%AA%E3%82%AC%E3%83%BC%E3%81%A8%E5%8F%82%E5%8A%A0%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%81%AE%E4%BB%95%E6%A7%98-%E3%81%8A%E3%81%95%E3%82%89%E3%81%84)
- [4. 半固定トリガーをどのように実現するか](#4-%E5%8D%8A%E5%9B%BA%E5%AE%9A%E3%83%88%E3%83%AA%E3%82%AC%E3%83%BC%E3%82%92%E3%81%A9%E3%81%AE%E3%82%88%E3%81%86%E3%81%AB%E5%AE%9F%E7%8F%BE%E3%81%99%E3%82%8B%E3%81%8B)
    - [4.1 アプローチその1) 固定トリガーを組んだ後で鍵を外す](#41-%E3%82%A2%E3%83%97%E3%83%AD%E3%83%BC%E3%83%81%E3%81%9D%E3%81%AE1-%E5%9B%BA%E5%AE%9A%E3%83%88%E3%83%AA%E3%82%AC%E3%83%BC%E3%82%92%E7%B5%84%E3%82%93%E3%81%A0%E5%BE%8C%E3%81%A7%E9%8D%B5%E3%82%92%E5%A4%96%E3%81%99)
        - [問題点) 主催者と各身内PTのリーダーの負担が大きい](#%E5%95%8F%E9%A1%8C%E7%82%B9-%E4%B8%BB%E5%82%AC%E8%80%85%E3%81%A8%E5%90%84%E8%BA%AB%E5%86%85pt%E3%81%AE%E3%83%AA%E3%83%BC%E3%83%80%E3%83%BC%E3%81%AE%E8%B2%A0%E6%8B%85%E3%81%8C%E5%A4%A7%E3%81%8D%E3%81%84)
    - [4.2 アプローチ2) 一般参加者に開放するPTを1つだけ設ける](#42-%E3%82%A2%E3%83%97%E3%83%AD%E3%83%BC%E3%83%812-%E4%B8%80%E8%88%AC%E5%8F%82%E5%8A%A0%E8%80%85%E3%81%AB%E9%96%8B%E6%94%BE%E3%81%99%E3%82%8Bpt%E3%82%921%E3%81%A4%E3%81%A0%E3%81%91%E8%A8%AD%E3%81%91%E3%82%8B)
        - [4.2.1 概要](#421-%E6%A6%82%E8%A6%81)
        - [4.2.2 よりスムーズに進行するために](#422-%E3%82%88%E3%82%8A%E3%82%B9%E3%83%A0%E3%83%BC%E3%82%BA%E3%81%AB%E9%80%B2%E8%A1%8C%E3%81%99%E3%82%8B%E3%81%9F%E3%82%81%E3%81%AB)
        - [4.2.3 まとめ](#423-%E3%81%BE%E3%81%A8%E3%82%81)
        - [4.2.4 というよりそもそも](#424-%E3%81%A8%E3%81%84%E3%81%86%E3%82%88%E3%82%8A%E3%81%9D%E3%82%82%E3%81%9D%E3%82%82)
- [5. 謝辞](#5-%E8%AC%9D%E8%BE%9E)

## 1. 概要

> 親しい人たちとゆりかごTに行きたい。
>
> でも、野良募集はたくさん人が集まるから、入れなくて困る。
>
> じゃあ、自分でトリガーを用意して、固定メンバーでやろうか。
>
> でも固定メンバーだけだと人数が足りない。
>
> じゃあ、足りない分は野良募集する半固定にしてみようかな。

…と考えたことのある人はそれなりにいると思います。

でもそういう野良募集を見かけることはほとんどありません。
多分ですが、半固定トリガーの編成手順がかなり面倒なのがその大きな要因のひとつだと思います。

本ドキュメントでは、半固定トリガーを編成する方法の例について解説します。

自分で書いておいて何ですが、**本ドキュメントで説明する例でもやや面倒です** ので、実際に実施する価値があるかどうかは各読者のご判断にお任せします。

あと、本ドキュメントは **長い** です。いきなり結論が読みたい方は [4.2.3 まとめ](#424-%E3%81%A8%E3%81%84%E3%81%86%E3%82%88%E3%82%8A%E3%81%9D%E3%82%82%E3%81%9D%E3%82%82) から読んでも大丈夫だと思います。多分。

## 2. 本ドキュメントが対象とする読者

本ドキュメントは、以下のような読者を対象にしています。

- PSO2 で野良トリガーの主催経験がある方

## 3. 固定トリガーと参加パスワードの仕様 (おさらい)

まず、完全な固定トリガー (野良募集をせず仲間内のPTだけで実施するトリガー) の編成方法のおさらいから始めます。
この辺の仕様を既にご存じの方は読み飛ばして
[4. 半固定トリガーをどのように実現するか](#4-%E5%8D%8A%E5%9B%BA%E5%AE%9A%E3%83%88%E3%83%AA%E3%82%AC%E3%83%BC%E3%82%92%E3%81%A9%E3%81%AE%E3%82%88%E3%81%86%E3%81%AB%E5%AE%9F%E7%8F%BE%E3%81%99%E3%82%8B%E3%81%8B)
へお進みください。

とりあえず、トリガーを貼るPT (主催PT) と、主催が参加させたいPT (身内PT) がいくつかあり、それ以外の部外者のPTはシャットアウトしたい、という状況を考えます。

| ![主催PTと身内PT1、身内PT2を優先して参加させたいとします](img/figure-01.png "優先して参加させたいメンバーのPT") |
|:--|
 
固定PTを組むためには、主催PTのパーティー設定画面で参加パスワードを設定します。(俗に言う **「鍵をかける」** というやつです)

| ![主催PTのパーティー設定画面で参加パスワードを設定します](img/パーティーのパスワードロック1.png "主催PTのパーティー設定画面で参加パスワードを設定した例") |
|:--|

参加パスワードを設定することにより、主催PTへ参加しようとすると以下のような画面が表示され、パスワードを知らない部外者は主催PTへ参加できなくなります。

| ![正しいパスワードを入力するとトリガーに参加できます](img/パスワード入力画面.png "パスワード入力画面") |
|:--|


> [!NOTE]
> ちなみに、鍵を外すには、以下のように参加パスワードの項目を消去します。
>
> | ![参加パスワードを消去することにより鍵を外すことが出来ます](img/パーティーのパスワードアンロック.png "パーティー設定画面で参加パスワードを消去した例") |
> |:--|

<br/>

これで部外者の参加をシャットアウトできるでしょうか？

いいえ、これだけでは不十分です。

**「パーティーへの参加のみ制限」** が指定されているので、これでシャットアウトできるのは、主催PTそのものへの参加だけです。

部外者がパーティーの一覧から主催PTを選んで、**「別のパーティーとして参加」** を選択すると、そのパーティーが参加しているトリガー (つまりゆりかごT) に参加できてしまいます。

| ![「このパーティーに参加する」/「別のパーティーとして参加」の選択肢](img/既存PTへの参加の選択.png "既存PTへの参加の選択") |
|:--|

その結果として、部外者のPTがトリガーを受注するタイミングによっては、以下のように、ゆりかごTの12人の枠内に身内PTが入れない可能性があります。

| ![部外者PTが主催PTと同じトリガーを受注出来てしまいます](img/figure-02.png "主催PTに参加パスワードを設定するだけでは不十分な例") |
|:--|

<br/>

部外者が主催PTと同じトリガーに参加できないようにするためには、主催PTのパーティー設定画面で **「他パーティーとのマルチプレイも制限」** を指定する必要があります。

| ![パーティーのパスワード設定で「他パーティーとのマルチプレイも制限」を選択した場合](./img/パーティーのパスワードロック2.png "パーティーのパスワード設定で「他パーティーとのマルチプレイも制限」を選択した場合") |
|:--|

この設定をすることにより、主催PTと同じトリガーに参加しようとすると、やはりパスワード入力画面が表示され、パスワードを知らない限りトリガーに参加できなくなります。

<br/>

では、今度こそ部外者の参加をシャットアウトできるでしょうか？

いいえ、残念ながらそれでも不十分です。

主催PTで設定した **「他パーティーとのマルチプレイも制限」** の指定は、あくまでも「**主催PTと同じトリガーへの参加** にはパスワードが必要となる」指定であって、以下のように、 部外者PTが**主催PT以外の身内PTと同じトリガーに参加** しようとする分には何ら障害とはなりません。

| ![部外者PTが身内PTと同じトリガーを受注出来てしまいます](./img/figure-03.png "主催PTに「他パーティーとのマルチプレイも制限」を指定するだけでは不十分な例") |
|:--|

この問題への完全な対処方法は、 **(パーティーを組んでいる人もソロの人も含めて) 主催PTと身内全員がパーティー設定画面で (参加パスワードを設定した上で) 「他パーティーとのマルチプレイも制限」を指定する** ことです。

| ![部外者PTを完全にシャットアウトできます](./img/figure-04.png "固定PTのための完全な対策の例") |
|:--|

この場合、主催PTのパーティー設定画面で設定するパスワードと、各身内PTのパーティー設定画面で設定するパスワードは、(ややこしいことに) 必ずしも一致する必要はありません。しかし、混乱を避けるために参加パスワードは統一しておくのが無難でしょう。

## 4. 半固定トリガーをどのように実現するか

PSO2でのトリガーへの鍵かけの仕組みを再確認したところで、改めて半固定トリガーをどのように実現するかを考えてみます。

### 4.1 アプローチその1) 固定トリガーを組んだ後で鍵を外す

この方法は手順としては簡単です。

1) 主催PTが鍵をかけた上でトリガーを貼る。(このとき鍵もかける)
2) 主催PTが貼ったトリガーを身内PTが受注する。(このとき鍵もかける)
3) **主催PTとすべての身内PTが参加できたことを確認した上で**、主催PTと身内PTの鍵を外す。
4) 参加希望者に白チャで準備ができたことを広報する。
5) 一般参加者のPTが (主催PTあるいはいずれかの身内PTの別パーティーとして) トリガーを受注する。

一見これで問題なさそうに見えます。過去にこの手順を実験的に実施した知人がいましたが、特に大きな問題は発生しませんでした。少なくとも外見上は。

この方法で問題となるのは以下の点です。

#### 問題点) 主催者と各身内PTのリーダーの負担が大きい

まず、「鍵をかけたり」「外したり」を、トリガーを貼る度にやらなければならないのが大変です。

完全な固定トリガーの場合は、各PTのパーティー設定画面で鍵をかける設定をしたらその後はパーティー設定画面をいじる必要はありません。
しかし、「鍵を外す」という手順が含まれているため、主催者を含めて固定メンバーのパーティーリーダーたちは、トリガーを貼る度にパーティー設定画面で鍵をかける設定をし直さなければなりません。

この負担は「トリガーを貼ってから一般参加者が参加可能になるまでのタイムラグ」にも反映されてしまうわけで、その分一般参加者を待たせることになります。
過去に実施した事例では、30秒～1分程度は余分にかかっていた記憶があります。


### 4.2 アプローチ2) 一般参加者に開放するPTを1つだけ設ける

「パーティー設定を何度もいじらずに済む方法はないか」という方向で考えたのがこの方法です。ちなみにこの方法はまだ実施した実績がありません。

#### 4.2.1 概要

固定メンバーのPTのうち、身内PTの1つを **「殿 (しんがり) PT」** と呼称し、**一般参加者へは殿PTへの「別のパーティーとして参加」だけをできる** ようにするものとします。

> [!NOTE]
> 後述するように、実はこれらの手順は大半のケースではもっと単純化が可能ですが、まずは理屈から説明させてください。

| ![部外者PTがトリガーを受注できるのは殿PTからだけに限定します](./img/figure-05.png "一般参加者に開放するPTを殿PTのみに限定する") |
|:--|

手順は以下の通りです。

1) 主催PTが鍵をかけた上でトリガーを貼る。このとき、参加パスワードと同時に **「他パーティーとのマルチプレイも制限」** も設定する。
2) 殿PT以外の身内PTの場合) 主催PTが貼ったトリガーを受注する。このとき、参加パスワードと同時に **「他パーティーとのマルチプレイも制限」** も設定する。
3) 殿PTの場合) **殿PT以外のすべての身内PTがトリガーを受注したのを確認してから** 殿PTもトリガーを受注する。このとき、参加パスワードと同時に **「パーティーへの参加のみ制限」** も設定する。
4) 一般参加者のPTが (殿PTの別パーティーとして) トリガーを受注する。

#### 4.2.2 よりスムーズに進行するために

前述の方法には以下のような改善可能な点があります。

##### [一般参加者がトリガーに参加するために参照するPT (殿PT) がどれだかわかりやすくする]

前述の方法を採用する場合、一般参加者がトリガーに参加するために参照できるPTは殿PTしかありませんが、一般参加者がパーティー名一覧を見ても、クエスト名である「T:闇のゆりかご(UH)」という名前がいくつか並んでいるだけで、どれが殿PTか一般参加者にはわかりません。
どれか適当なPTを選んで参加しようしても、それが殿PTではなかった場合はパスワードを確認されてしまうので、一般参加者はイライラすることでしょう。

幸い、この問題の対処方法は容易です。

パーティー名一覧に表示される名前は、パーティーの設定で変更できます。例えば以下のような具合です。

| ![パーティー設定画面でパーティー名を「実験用パーティー」に変更してみます](./img/パーティー設定画面でパーティー名を設定する.png "パーティー設定画面でのパーティー名の変更例") |
|:--|

このようにパーティー名を変更すると、パーティー名一覧には以下のように表示されます。

| ![パーティー名一覧画面にはパーティー設定画面で設定した「実験用パーティー」という名前が表示されます](./img/パーティー名を変更した場合のパーティー一覧の見え方.png "パーティー名を変更した場合のパーティー一覧の見え方") |
|:--|

これを利用して、例えば以下のようにパーティー名を設定すれば、一般参加者からはだいぶわかりやすくなる (はず) です。

- 主催PTおよび (殿PTを除く) 身内PTでは、パーティー名を ``※関係者専用※`` などとしておく。
- 殿PTでは、パーティー名を ``ゆりかごT入口 別PTとして参加`` などとしておく。

#### 4.2.3 まとめ

ここまでの内容を総合すると、各PTの作業の流れは以下のようになります。

| ![半固定トリガーの受注が終えるまでの流れの図です](./img/半固定トリガーの受注の流れ.png "半固定トリガーの受注の流れ") |
|:--|

主催PTから殿PTへの連絡手段は、チームチャットなりグループチャットなり殿PTのリーダーへのウィスパーなり、事前に相談のうえであれば何でもいいと思います。

合図の内容は、主催PTから殿PTのリーダーへタイミングを伝えたいだけなので、単純に「k」とかでもいいと思います。

> [!NOTE]
> 殿PTのリーダーは、主催から合図が来たらすぐに行動しなければなりませんが、チャットログにある主催からの合図が今回のトリガーのものか前回のトリガーのものか、わからなくなる可能性もあります。
>
> 例えば、合図に何らかのチャットを使用していて、前回のトリガーでの合図以降、殿PTのリーダーのチャットログに何も残っていない場合 (つまりチャットログの最後の行が前回のトリガーでの主催からの合図であった場合) は、今回のトリガーで合図が来たかどうかがとっさにわからないことも考えられます。
>
> この対策としては、殿PTのリーダーは受注を終えたら、発言先はPTチャットでも何でもいいので、自分も「k」と発言する習慣をつけるといいでしょう。そうすれば、主催PTから来た合図が前回のものか今回のものかが容易に区別できます。

#### 4.2.4 というよりそもそも

ここまでお読みになった読者の中には疑問に思われる方もおられるのではないでしょうか。

> 「ここまでややこしい必要あるの？」

はい、実のところ、作業内容をもっと単純化することが出来ます。

前述したような手順が必要になるのは、そもそも、主催PTの他に身内のPTが複数ある場合です。

まず、身内PTが全くない (つまり身内メンバーが主催PTのみ) 場合は、そもそも半固定トリガーにする必要がありません。普通に野良トリガーを主催すればOKです。

次に、身内PTが1つだけ (つまり 身内PT イコール 殿PT ) の場合は、 **「殿PTを除く身内PTの受注を待って殿PTも受注する」という部分の作業をまるっと省略できる** ので、以下のように流れが単純になります。

| ![身内PTが殿PTのみの場合は半固定トリガーの受注の流れが単純になります](./img/単純化された半固定トリガーの受注の流れ.png "単純化された半固定トリガーの受注の流れ") |
|:--|

最後に、身内PTが複数ある場合、これは主催PTを含めて身内の参加メンバーが9人以上いるということです。
少なくとも筆者の場合は、9人以上も身内メンバーがいるなら、半固定などという面倒なことはやめて、普通に固定でやります。なので、やはり前述したような複雑な手順は要りません。

> [!WARNING]
> 半固定トリガーを開催する場合は、一般参加者にその旨事前に連絡しておくべきです。
> 
> 例) ``今回は一部パーティーにはパスワードがかかっています。「〇〇〇」という名前のパーティーから「別パーティとして参加」を選んでご参加ください`` など。
>
> 半固定トリガーである旨の連絡が全くなく、一部のパーティーにパスワードロックがかかっていたりすると、一般参加者が非常に混乱します。中には参加を取りやめる参加者も多いでしょう。

## 5. 謝辞

本ドキュメントの作成にあたり、鍵かけに関する仕様の調査やさまざまなスクリーンショットの撮影に協力していただいた H さんと S さんに感謝を申し上げます。
あなたたちのご協力がなければ本ドキュメントは完成しませんでした。
